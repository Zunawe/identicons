<!DOCTYPE html>
<html>
	<head>
		<script src="./md5-js/md5.min.js"></script>
		<script src="squareIdenticon.js"></script>
		<script src="circularIdenticon.js"></script>
		<script src="polygonalIdenticon.js"></script>
		<script>
			function draw(){
				var typeSelect = document.getElementById('identiconType');
				switch(typeSelect.options[typeSelect.selectedIndex].value){
					case 'square':
						document.getElementById('shellFieldDiv').style.display = 'none';
						document.getElementById('segmentFieldDiv').style.display = 'none';
						document.getElementById('symmetryFieldDiv').style.display = 'none';
						document.getElementById('edgesFieldDiv').style.display = 'none';
						drawSquare();
						break;
					case 'circular':
						document.getElementById('shellFieldDiv').style.display = 'inline';
						document.getElementById('segmentFieldDiv').style.display = 'inline';
						document.getElementById('symmetryFieldDiv').style.display = 'inline';
						document.getElementById('edgesFieldDiv').style.display = 'none';
						drawCircular();
						break;
					case 'polygonal':
						document.getElementById('shellFieldDiv').style.display = 'inline';
						document.getElementById('segmentFieldDiv').style.display = 'none';
						document.getElementById('symmetryFieldDiv').style.display = 'none';
						document.getElementById('edgesFieldDiv').style.display = 'inline';
						drawPolygonal();
						break;
				}
			}

			function drawSquare(){
				var identicon = document.getElementById('identicon');
				identicon.innerHTML = '';
				identicon.appendChild(squareIdenticonSVG(300, document.getElementById('textInput').value));
			}

			function drawCircular(){
				var options = {};
				var shellCount = document.getElementById('shellField').value;
				var segmentCount = document.getElementById('segmentField').value;
				var symmetry = document.getElementById('symmetryField').value || undefined;
				options.shells = shellCount;
				options.segments = segmentCount;
				options.symmetryAxisTilt = symmetry;

				var identicon = document.getElementById('identicon');
				identicon.innerHTML = '';
				identicon.appendChild(circularIdenticonSVG(300, document.getElementById('textInput').value, options));
			}

			function drawPolygonal(){
				var options = {};
				var shellCount = document.getElementById('shellField').value;
				var edgesCount = document.getElementById('edgesField').value;
				options.shells = shellCount;
				options.edges = edgesCount;

				var identicon = document.getElementById('identicon');
				identicon.innerHTML = '';
				identicon.appendChild(polygonalIdenticonSVG(300, document.getElementById('textInput').value, options));
			}
		</script>
		<style>
			body {
				margin-top: 0px;

				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			}

			#form {
				margin: 100px;
				display: flex;
				flex-direction: column;
				align-items: center;
			}
		</style>
	</head>

	<body onload="draw()">
		<form id="form" oninput=draw()>
			<select id="identiconType">
				<option value="square">Square</option>
				<option value="circular">Circular</option>
				<option value="polygonal">Polygonal</option>
			</select>
			<div id="shellFieldDiv">Shells: <input id="shellField" type="number" /></div>
			<div id="segmentFieldDiv">Segments: <input id="segmentField" type="number" /></div>
			<div id="symmetryFieldDiv">Symmetric Axis Angle: <input id="symmetryField" type="number" /></div>
			<div id="edgesFieldDiv">Edges: <input id="edgesField" type="number" /></div>
			<textarea id="textInput" rows="4" cols="50"></textarea>
		</form>
		<div id="identicon"></div>
	</body>
</html>
