<!DOCTYPE html>
<html>
	<head>
		<script src="./md5-js/md5.min.js"></script>
		<script src="squareIdenticon.js"></script>
		<script src="circularIdenticon.js"></script>
		<script src="polygonalIdenticon.js"></script>
		<script>
			function draw(){
				var typeSelect = document.getElementById('identiconType');
				switch(typeSelect.options[typeSelect.selectedIndex].value){
					case 'square':
						document.getElementById('shellFieldContainer').style.display = 'none';
						document.getElementById('segmentFieldContainer').style.display = 'none';
						document.getElementById('symmetryFieldContainer').style.display = 'none';
						document.getElementById('edgesFieldContainer').style.display = 'none';
						drawSquare();
						break;
					case 'circular':
						document.getElementById('shellFieldContainer').style.display = 'table-row';
						document.getElementById('segmentFieldContainer').style.display = 'table-row';
						document.getElementById('symmetryFieldContainer').style.display = 'table-row';
						document.getElementById('edgesFieldContainer').style.display = 'none';
						drawCircular();
						break;
					case 'polygonal':
						document.getElementById('shellFieldContainer').style.display = 'table-row';
						document.getElementById('segmentFieldContainer').style.display = 'none';
						document.getElementById('symmetryFieldContainer').style.display = 'none';
						document.getElementById('edgesFieldContainer').style.display = 'table-row';
						drawPolygonal();
						break;
				}
			}

			function drawSquare(){
				var identicon = document.getElementById('identicon');
				identicon.innerHTML = '';
				identicon.appendChild(squareIdenticonSVG(400, document.getElementById('textInput').value));
			}

			function drawCircular(){
				var options = {};
				var shellCount = document.getElementById('shellField').value;
				var segmentCount = document.getElementById('segmentField').value;
				var symmetry = document.getElementById('symmetryField').value || undefined;
				options.shells = shellCount;
				options.segments = segmentCount;
				options.symmetryAxisTilt = symmetry;

				var identicon = document.getElementById('identicon');
				identicon.innerHTML = '';
				identicon.appendChild(circularIdenticonSVG(400, document.getElementById('textInput').value, options));
			}

			function drawPolygonal(){
				var options = {};
				var shellCount = document.getElementById('shellField').value;
				var edgesCount = document.getElementById('edgesField').value;
				options.shells = shellCount;
				options.edges = edgesCount;

				var identicon = document.getElementById('identicon');
				identicon.innerHTML = '';
				identicon.appendChild(polygonalIdenticonSVG(400, document.getElementById('textInput').value, options));
			}
		</script>
		<style>
			body {
				margin-top: 0px;

				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
			}

			#form {
				margin: 100px;
				display: flex;
				flex-direction: column;
				align-items: center;
			}
		</style>
	</head>

	<body onload="draw()">
		<form id="form" oninput=draw()>
			<select id="identiconType">
				<option value="square">Square</option>
				<option value="circular">Circular</option>
				<option value="polygonal">Polygonal</option>
			</select>
			<table style="table-layout: fixed;">
				<tr id="shellFieldContainer">
					<td>Shells:</td>
					<td><input id="shellField" size="4" type="number" /></td>
				</tr>
				<tr id="segmentFieldContainer">
					<td>Segments:</td>
					<td><input id="segmentField" size="4" type="number" /></td>
				</tr>
				<tr id="symmetryFieldContainer">
					<td>Symmetric Axis Angle:</td>
					<td><input id="symmetryField" size="4" type="number" /></td>
				</tr>
				<tr id="edgesFieldContainer">
					<td>Edges:</td>
					<td><input id="edgesField" size="4" type="number" /></td>
				</tr>
			</table>
			<textarea id="textInput" rows="4" cols="50"></textarea>
		</form>
		<div id="identicon"></div>
	</body>
</html>
